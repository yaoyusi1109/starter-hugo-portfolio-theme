{{ $block := .Block }}
{{ $id := .Block.Content.form.id }}

{{ $block.Scratch.Set "has_contact_form" true }}

<div class="row contact-widget">
  <div class="col-12 col-lg-8 section-heading">
    {{ with $block.Title }}
      <h1>{{ . | markdownify | emojify }}</h1>
    {{ end }}
    {{ with $block.Params.subtitle }}
      <p>{{ . | markdownify | emojify }}</p>
    {{ end }}
  </div>
</div>

<div class="row">
  {{ if $block.Params.content.contact_links }}
    {{ $contact_links := $block.Params.content.contact_links }}
    <div class="col-12 col-lg-4">
      <div class="contact-info">
        <h3>{{ i18n "contact_info" | default "Contact Info" }}</h3>
        {{ range $contact_links }}
          <div class="contact-item">
            <i class="{{ .icon_pack }} {{ .icon }}"></i>
            <span>{{ .name }}</span>
            {{ if .link }}
              <a href="{{ .link }}" target="_blank" rel="noopener">{{ .name }}</a>
            {{ end }}
          </div>
        {{ end }}
      </div>
    </div>
  {{ end }}

  <div class="col-12 col-lg-8">
    <!-- Simple Netlify form that will definitely work -->
    <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field">
      <!-- Hidden input for Netlify -->
      <input type="hidden" name="form-name" value="contact" />
      
      <!-- Honeypot field to catch bots -->
      <p class="hidden">
        <label>Don't fill this out if you're human: <input name="bot-field" /></label>
      </p>
      
      <div class="form-group">
        <label for="name">{{ i18n "contact_name" | default "Name" }} *</label>
        <input type="text" class="form-control" id="name" name="name" required>
      </div>
      
      <div class="form-group">
        <label for="email">{{ i18n "contact_email" | default "Email" }} *</label>
        <input type="email" class="form-control" id="email" name="email" required>
      </div>
      
      <div class="form-group">
        <label for="subject">{{ i18n "contact_subject" | default "Subject" }} *</label>
        <input type="text" class="form-control" id="subject" name="subject" required>
      </div>
      
      <div class="form-group">
        <label for="message">{{ i18n "contact_message" | default "Message" }} *</label>
        <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
      </div>
      
      {{ if $block.Params.content.form.netlify.captcha }}
        <div class="form-group">
          <div data-netlify-recaptcha="true"></div>
        </div>
      {{ end }}
      
      <button type="submit" class="btn btn-primary">
        {{ i18n "contact_send" | default "Send Message" }}
      </button>
    </form>
  </div>
</div>

<style>
.contact-widget {
  margin-bottom: 2rem;
}

.contact-info {
  background: #f8f9fa;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1rem;
}

.contact-item {
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.contact-item i {
  color: #007bff;
  width: 20px;
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-control {
  border-radius: 6px;
  border: 1px solid #ced4da;
  padding: 0.75rem;
}

.form-control:focus {
  border-color: #007bff;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

.btn-primary {
  background: linear-gradient(to right, #FFB76B 0%, #FFA73D 30%, #FF7C00 60%, #FF7F04 100%);
  border: none;
  padding: 0.75rem 2rem;
  border-radius: 6px;
  font-weight: 600;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(255, 124, 0, 0.3);
}

.hidden {
  display: none;
}
</style>
